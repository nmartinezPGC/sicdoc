
<div class="container">
<!-- Datos Generales de los Usuarios -->
<div class="row">
    <div class="col-xs-12 col-sm-8 col-md-9 col-sm-offset-2 col-md-offset-3">
      <!-- Div que representan las Acciones al Ingresar un Usuario -->
      <br>
      <div name="alert" class="alert alert-success" role="alert" *ngIf="status == 'success' " >
        <strong>Bien hecho!</strong> {{ mensajes }}
      </div>

      <div class="alert alert-danger" role="alert" *ngIf="status == 'error' " >
        <strong>Que mal!</strong> {{ mensajes }}
      </div>

      <!-- Loader de Carga de los Datos -->
      <div id="loader-2" *ngIf="loading == 'show' ">
        <img src="assets/images/loading_1.gif" alt="Cargando Tareas">
      </div>

		<form #ingresoComunicacionForm="ngForm" (ngSubmit)="onSubmit(registerComunicacion)" name="ingresoComunicacionForm" role="form">
			<h2> {{ titulo }} <small> | SICDOC.</small></h2>
			<hr class="colorgraph">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#datosGen">Datos Generales</a>
        </h4>
      </div>
      <hr>
      <div class="panel-collapse collapse" id="datosGen">
        <!-- <div class="row">
          <div class="col-xs-12 col-sm-6 col-md-4">
            Nuevo Oficio: <small *ngFor="let list of JsonOutgetCodigoSecuenciaNew" name="secuenciaComunicacionIn"
             for="secuenciaComunicacionIn">{{list.codSecuencial}} - {{list.valor2 + 1}}</small>
          </div>
        </div> -->

        <div class="row">
  				<div class="col-xs-12 col-sm-6 col-md-4">
  					<div class="form-group" >
               <input #codReferenciaSreci="ngModel" type="text" name="codReferenciaSreci" id="codReferenciaSreci"
                    ngControl="codReferenciaSreci" [(ngModel)]="comunicacion.codReferenciaSreci"
                   class="form-control input-lg" required placeholder="Codigo de Referencia" tabindex="1" maxlength="30" minlength="5">
                  <small class="form-text text-muted" *ngIf="codReferenciaSreci.errors?.required" >Ingresa el Codigo de Referencia</small>
                  <small class="form-text text-muted" *ngIf="codReferenciaSreci.errors?.minlength" >Se nesesita por lo menos {{ codReferenciaSreci.errors.minlength.requiredLength }} caracteres</small>
  					</div>
  				</div>

          <!-- Tema de la Comunicacion -->
          <div class="col-xs-12 col-sm-6 col-md-8">
  					<div class="form-group" >
               <input #temaCorrespondencia="ngModel" type="text" name="temaCorrespondencia" id="temaCorrespondencia"
                    ngControl="temaCorrespondencia" [(ngModel)]="comunicacion.temaCorrespondencia"
                   class="form-control input-lg" required placeholder="Tema de la Comunicacion" tabindex="2" minlength="7">
                  <small class="form-text text-muted" *ngIf="temaCorrespondencia.errors?.required" >Ingresa el Tema de la Comunicacion</small>
                  <small class="form-text text-muted" *ngIf="temaCorrespondencia.errors?.minlength" >Se nesesita por lo menos {{ temaCorrespondencia.errors.minlength.requiredLength }} caracteres</small>
  					</div>
  				</div>

          <div class="col-xs-12 col-sm-6 col-md-12">
            <div class="form-group">
                <textarea #descCorrespondencia="ngModel" class="form-control" id="descCorrespondencia" name="descCorrespondencia" rows="3"
                    placeholder="Ingresa la Descripcion del Oficio" tabindex="3" required minlength="10"
                    ngControl="descCorrespondencia" [(ngModel)]="comunicacion.descCorrespondencia"></textarea>
                <small class="form-text text-muted" *ngIf="descCorrespondencia.errors?.required" >Ingresa el Descripcion del Oficio</small>
                <small class="form-text text-muted" *ngIf="descCorrespondencia.errors?.minlength" >Se nesesita por lo menos {{ descCorrespondencia.errors.minlength.requiredLength }} caracteres</small>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-sm-6 col-md-3">
            <div class="form-group">
                <label for="example-date-input" class="form-text text-muted">Fecha Maxima de Entrega </label>
                <input #fechaMaxEntrega class="form-control" type="date"  value="2017-09-11" tabindex="4" required
                name="fechaMaxEntrega" id="fechaMaxEntrega" ngControl="fechaMaxEntrega" [(ngModel)]="comunicacion.fechaMaxEntrega" >

            </div>
          </div>
  			</div>
      </div>


      <hr>
      <!-- Datos de las Direcciones Involucradas -->
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#dirSreci">Direcciones SRECI</a>
        </h4>
      </div>

      <hr>
      <div class="panel-collapse collapse in" id="dirSreci">
  			<div class="row">
          <!-- Direccion Encargada del tema de la Comunicacion -->
          <div class="col-xs-12 col-sm-6 col-md-6">
            <div class="form-group">
              <select #idDireccionSreci="ngModel" class="form-control" name="idDireccionSreci" id="idDireccionSreci" required
                    ngControl="idDireccionSreci" [(ngModel)]="comunicacion.idDireccionSreci"  (change)="getlistaSubDireccionesSRECI()" >
                  <option value="0">Dirección SRECI Responsable </option>
                  <option *ngFor="let list of JsonOutgetlistaDireccionSRECI" value="{{ list.idDireccionSreci }}">{{ list.descDireccionSreci }}</option>
              </select>
              <small class="form-text text-muted" *ngIf="idDireccionSreci.value == 0 || idDireccionSreci.value == null " >Debes Seleccionar una Dirección SRECI responsable</small>
              <small class="form-text text-muted" *ngIf="idDireccionSreci.errors?.required" >Debes Seleccionar una Dirección SRECI responsable</small>
            </div>
         </div>

         <!-- Direccion Encargada del tema de la Comunicacion -->
         <div class="col-xs-12 col-sm-6 col-md-6">
           <div class="form-group">
             <select #idDeptoFuncional="ngModel" class="form-control" name="idDeptoFuncional" id="idDeptoFuncional" required
                   ngControl="idDeptoFuncional" [(ngModel)]="comunicacion.idDeptoFuncional"  >
                 <option value="0">Sub Dirección SRECI Responsable</option>
                 <option *ngFor="let list of JsonOutgetlistaSubDireccionSRECI" value="{{ list.idDeptoFuncional }}">{{ list.descDeptoFuncional }}</option>
             </select>
             <small class="form-text text-muted" *ngIf="idDeptoFuncional.value == 0 || idDeptoFuncional.value == null " >Debes Seleccionar una Sub Dirección SRECI responsable</small>
             <small class="form-text text-muted" *ngIf="idDeptoFuncional.errors?.required" >Debes Seleccionar una Sub Dirección SRECI responsable</small>
           </div>
         </div>
       </div>

        <!-- Boton de Agregar Nueva Direcion Acompañante -->
        <!-- <input type="button" id="btAdd" value="Añadir Elemento" class="bt" (click)="fnd()" /> -->
        <div class="row">
          <!-- Direccion Acompañante del tema de la Comunicacion -->
          <div class="col-xs-12 col-sm-6 col-md-6">
            <div class="form-group">
              <select #idDireccionSreciAcom="ngModel" class="form-control" name="idDireccionSreciAcom" id="idDireccionSreciAcom"
                    ngControl="idDireccionSreciAcom" [(ngModel)]="comunicacion.idDireccionSreciAcom"  (change)="getlistaSubDireccionesSRECIAcom()" >
                  <option value="0">Dirección SRECI Acompañante </option>
                  <option *ngFor="let list of JsonOutgetlistaDireccionSRECIAcom" value="{{ list.idDireccionSreci }}">{{ list.descDireccionSreci }}</option>
              </select>
              <small class="form-text text-muted" *ngIf="idDireccionSreciAcom.value == 0 || idDireccionSreciAcom.value == null " >Debes Seleccionar una Dirección SRECI acompañante</small>
            </div>
         </div>

         <!-- Sub Direccion Acompañante del tema de la Comunicacion -->
         <div class="col-xs-12 col-sm-6 col-md-6">
           <div class="form-group">
             <select #idDeptoFuncionalAcom="ngModel" class="form-control" name="idDeptoFuncionalAcom" id="idDeptoFuncionalAcom"
                   ngControl="idDeptoFuncionalAcom" [(ngModel)]="comunicacion.idDeptoFuncionalAcom"  >
                 <option value="0">Sub Dirección SRECI Acompañante</option>
                 <option *ngFor="let list of JsonOutgetlistaSubDireccionSRECIAcom" value="{{ list.idDeptoFuncional }}">{{ list.descDeptoFuncional }}</option>
             </select>
             <small class="form-text text-muted" *ngIf="idDeptoFuncionalAcom.value == 0 || idDeptoFuncionalAcom.value == null " >Debes Seleccionar una Sub Dirección SRECI acompañante</small>
           </div>
         </div>


        </div>
      </div>


      <hr>
      <!-- Datos de las Relaciones de las Tablas -->
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#demo">Informacion Complementaria</a>
        </h4>
      </div>

      <hr>
      <div class="panel-collapse collapse in" id="demo">

  			<div class="row">
          <!-- Lista de Paises -->
  				<div class="col-xs-12 col-sm-6 col-md-3">
  					<div class="form-group">
              <select #idPais="ngModel" class="form-control" name="idPais" id="idPais"
                    ngControl="idPais" [(ngModel)]="comunicacion.idPais" >
                  <option value="0">País</option>
                  <option *ngFor="let list of JsonOutgetlistaPaises" value="{{ list.idPais }}">{{ list.descPais }}</option>
              </select>
              <small class="form-text text-muted" *ngIf="idPais.value == 0 || idPais.value == null " >Debes Seleccionar un País</small>
  					</div>
  				</div>

          <!-- Tipo de Institucion -->
          <div class="col-xs-12 col-sm-6 col-md-4">
  					<div class="form-group">
              <select #idTipoInstitucion="ngModel" class="form-control" name="idTipoInstitucion" id="idTipoInstitucion"
                    ngControl="idTipoInstitucion" [(ngModel)]="comunicacion.idTipoInstitucion" (change)="getlistaInstituciones()" >
                  <option value="0" >Tipo de Institución</option>
                  <option *ngFor="let list of JsonOutgetlistaTipoInstitucion" value="{{ list.idTipoInstitucion }}">{{ list.descTipoInstitucion }}</option>
              </select>
              <small class="form-text text-muted" *ngIf="idTipoInstitucion.value == 0 || idTipoInstitucion.value == null " >Debes Seleccionar un tipo de Institución</small>
  					</div>
  				</div>


          <!-- Estado de la Comunicacion -->
          <!-- <div class="col-xs-12 col-sm-6 col-md-6">
            <div class="form-group">
              <select #idEstado="ngModel" class="form-control" name="idEstado" id="idEstado"
                    ngControl="idEstado" [(ngModel)]="comunicacion.idEstado"  >
                  <option value="0">Selecciona un Estado</option>
                  <option *ngFor="let list of JsonOutgetlistaEstados" value="{{ list.idEstado }}">{{ list.descripcionEstado }}</option>
              </select>
              <small class="form-text text-muted" *ngIf="idEstado.value == 0 || idEstado.value == null " >Debes Seleccionar un Estado</small>
            </div>
          </div> -->

          <!-- Instituciones de la Comunicacion -->
          <div class="col-xs-12 col-sm-6 col-md-5">
            <div class="form-group">
              <select #idInstitucion="ngModel" class="form-control" name="idInstitucion" id="idInstitucion"
                    ngControl="idInstitucion" [(ngModel)]="comunicacion.idInstitucion"  (change)="getlistaInstituciones()" >
                  <option value="0">Selecciona una Institución</option>
                  <option *ngFor="let list of JsonOutgetlistaInstitucion" value="{{ list.idInstitucion }}">{{ list.descInstitucion }}</option>
              </select>
              <small class="form-text text-muted" *ngIf="idInstitucion.value == 0 || idInstitucion.value == null " >Debes Seleccionar una Institución</small>
             <!-- <input #hideCom="ngModel" type="hidden" name="hideCom" ngControl="hideCom" [(ngModel)]="comunicacion.hideCom" value="{{ comunicacion.idInstitucion }}" required> -->
             <!-- <small class="form-text text-muted" *ngIf="hideCom.errors?.required" >Debes Seleccionar una Sub Dirección JJJJ</small> -->
            </div>
          </div>

  			</div>

            <div class="row">

            <!-- Subir PDF del Oficio entrante -->
            <div class="col-xs-12 col-sm-6 col-md-12">
              <div class="form-group">
                <label for="exampleInputFile">Agregar Pdf</label>
                <input #pdfDocumento="ngModel" type="file" class="form-control-file" id="pdfDocumento" name="pdfDocumento"
                     ngControl="pdfDocumento" [(ngModel)]="comunicacion.pdfDocumento" placeholder="Subir Pdf ..."
                     aria-describedby="fileHelp" (change)="fileChangeEvent($event)">

                 <small id="fileHelp" class="form-text text-muted">Esta seccion sirve, para ingresar un pdf desde su equipo local y asiganarlo al Oficio.</small>
                </div>
                <!-- Barra de Progreso de Carga de la Imagen -->
                <div class="progress">
                    <div id="upload-progress-bar" class="progress-bar progress-bar-success"
                        role="progressbar"
                        aria-valuenow="0"
                        aria-valuemin="0"
                        aria-valuemax="0"
                        style="width:1%">
                    </div>
                </div>
                <p id="status"></p>
            </div>


          </div>
      </div>
      <hr>

			<div class="row">
				<div class="col-xs-8 col-sm-9 col-md-9">
					 Para saber mas de utilidad de esta aplicacion, verifica los <a href="#" data-toggle="modal" data-target="#t_and_c_m"> manuales de usuario </a> que tiene este sistema.
				</div>
			</div>

			<hr class="colorgraph">
			<div class="row">
				<div class="col-xs-12 col-md-3">
            <input type="submit" value="Guardar" class="btn btn-primary btn-block btn-lg" tabindex="17" [disabled]="!ingresoComunicacionForm.valid"  >
        </div>
				<div class="col-xs-12 col-md-3">

            <a [routerLink]="['/ingreso-comunicacion']" class="btn btn-success btn-block btn-lg"
               (click)="resetForm()" >Limpiar</a>
        </div>
			</div>
		</form>
	</div>

  <!-- Columna del formulario -->

  <!-- Columna para mostrar los Datos relalevantes de los Ingresos de Comunicaciones -->
  <div class="col-2">
    <div class="card" style="width: 16rem; margin-top:5px">
      <!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
      <div class="card-block">
        <h4 class="card-title"> Resumen</h4>
        <!-- <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p> -->
         <p> <i class="material-icons">assignment</i> Oficios Ingresados {{ countOficios }} </p>
         <p>  <i class="material-icons">assignment_late</i> Oficos Pendientes </p>
         <p> <i class="material-icons">assignment_turned_in</i> Oficios Finalizadas </p>

        <input type="text" name="buscatexto"  value="" placeholder="Ingresa Oficio"
              (keyup)="buscarPais(buscatexto.value)"  #buscatexto>
        <a href="#" class="btn btn-primary">Ver listado</a>

      </div>
    </div>
  </div>
<!-- Columna de las Tarjetas -->

</div>
<!-- Modal -->
<div class="modal fade" id="t_and_c_m" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h4 class="modal-title" id="myModalLabel">Terminos & Condiciones</h4>
			</div>
			<div class="modal-body">
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Similique, itaque, modi, aliquam nostrum at sapiente consequuntur natus odio reiciendis perferendis rem nisi tempore possimus ipsa porro delectus quidem dolorem ad.</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal">I Agree</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<hr>
