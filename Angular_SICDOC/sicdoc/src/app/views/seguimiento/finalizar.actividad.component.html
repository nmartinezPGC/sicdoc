<div class="container-fluid">

  <h2> {{ titulo }} <small> | SICDOC.</small></h2>
  <hr class="colorgraph">

  <!-- Loader de Carga de los Datos -->
  <div id="loader-2" *ngIf="loading == 'show'" style="margin-left:45%; margin-top:5%; margin-bottom:5%;">
    <!-- <img src="assets/images/aguarde.gif" alt="Cargando Tareas"> -->
    <img src="assets/images/832.gif" alt="Cargando Tareas">
  </div>

  <!-- Loader de Carga de la Pagina -->
  <div class="loader-new" *ngIf="loading == 'show' " >
    <img id="imgload" src="assets/images/745.gif" alt="Cargando Tareas">
  </div>

  <!-- Fila para el Area de Busqueda de los Oficios -->
  <!-- <div class="row-fluid" *ngIf="loadTabla1 == true">
    <div class="col-xs-12 col-md-12 col-lg-12">
    <h4>Buscar por:
    <input type="radio" name="codCorr" [(ngModel)]="codCorr" value="temaComunicacion" >Tema |
    <input type="radio" name="codCorr" [(ngModel)]="codCorr" value="codCorrespondenciaEnc"  >No. Interno |
    <input type="radio" name="codCorr" [(ngModel)]="codCorr" value="codReferenciaSreci" >No. Ingresado |
    <input type="radio" name="codCorr" [(ngModel)]="codCorr" value="descCorrespondenciaEnc" >Descripción
    </h4>
      <input class="form-control" type="text" name="search"  [(ngModel)]="search" placeholder="Buscar" >
    </div>
  </div> -->

  <hr>

  <!-- Fila para la tabla Principal de la ventana de finalizar Oficio -->
  <div class="col-xs-12 col-md-12 col-lg-12" *ngIf="loadTabla1 == true">
    <table id="example" class="table table-striped table-hover table-responsive" cellspacing="0" width="100%"   >
        <thead >
            <tr>
              <th>No</th>
              <th title="Código que se Utiliza para busquedas, generado Automaticamente">Código Interno (SICDOC)</th>
              <th title="Código que se Autogenera o se Ingresa">Código Referencia / Ingresado</th>
              <th>Institución de Comunicación</th>
              <th>Tema de Comunicación</th>
              <th>Fecha Creación</th>
              <th>Fecha Entrega.</th>
              <th>Com. / Vinculante</th>
              <th>Estado</th>
              <th style="width:95px">Accion</th>
            </tr>
        </thead>

        <tbody >
            <tr *ngFor="let item of JsonOutgetlistaOficiosAll | searchfilter:codCorr:search; let i = index ">
              <td>{{ i + 1 }}</td>
              <td style="cursor: pointer" title="{{ item.idCorrespondenciaEnc }}" > {{ item.codCorrespondenciaEnc }} </td>
              <td> {{ item.codReferenciaSreci }} </td>
              <td style="cursor: help" title="Descripcion: {{ item.perfilInstitucion }}"> {{ item.descInstitucion }} </td>
              <td style="cursor: help" title="Descripcion: {{ item.descCorrespondenciaEnc }}"> {{ item.temaComunicacion }} </td>
                <!-- <td> {{ timeConverter( item.fechaMaxEntrega.timestamp )  }} </td> -->
              <td> {{ item.fechaIngreso | date :'dd-MM-yyyy' }} </td>
              <td> {{ item.fechaMaxEntrega | date :'dd-MM-yyyy' }} </td>
              <td> {{ (item.comunicacionVinculante  !== null) ? ( item.comunicacionVinculante ) : "No tiene Vinculación" }} </td>
              <td [ngClass]="{ 'text-warning': item.idEstado == 3, 'text-info' : item.idEstado == 8,
                              'text-success': item.idEstado == 7 }" >
                  {{ item.descripcionEstado }}
              </td>
              <td>
                  <!-- Boton de Respuesta para la Comunicacion de Entrada -->
                  <!-- <a *ngIf="(item.idEstado == 3 || item.idEstado == 7 ) && (item.idTipoDocumento == 1 || item.idTipoDocumento == 2)
                        && item.idTipoComunicacion == 1 "
                    href="/#" (click)="datoOficio( item.codCorrespondenciaEnc, item.codReferenciaSreci,
                                                         item.idDeptoFuncional,
                                                         item.nombre1Funcionario, item.apellido1Funcionario,
                                                         item.nombre2Funcionario, item.apellido2Funcionario,
                                                         item.idFuncionario, item.idEstado, item.idCorrespondenciaEnc,
                                                         item.idTipoDocumento, item.idTipoComunicacion );
                                                         listarCodigoCorrespondenciaAgregarActividad(item.idTipoDocumento, item.idTipoComunicacion);"
                     data-toggle="modal" data-target="#t_and_c_m2" >
                     <img src="/assets/icons/comunicacion/test_green_24x24.png" class="d-inline-block align-top" alt="" title="Comunicación de Respuesta" >
                  </a> -->

                  <!-- Boton de Agregar Actividad a Comunicacion -->
                  <!-- <a *ngIf="item.idEstado == 3 && item.idTipoDocumento != 1 " -->
                  <a *ngIf="(item.idEstado == 3 || item.idEstado == 7) "
                     href="/#" (click)="datoOficio( item.codCorrespondenciaEnc, item.codReferenciaSreci,
                                                         item.idDeptoFuncional,
                                                         item.nombre1Funcionario, item.apellido1Funcionario,
                                                         item.nombre2Funcionario, item.apellido2Funcionario,
                                                         item.idFuncionario, item.idEstado, item.idCorrespondenciaEnc,
                                                         item.idTipoDocumento, item.idTipoComunicacion,
                                                         item.temaComunicacion, item.descInstitucion, item.perfilInstitucion, item.comunicacionVinculante);
                                                         listarCodigoCorrespondenciaAgregarActividad(item.idTipoDocumento, item.idTipoComunicacion);"
                          data-toggle="modal" data-target="#t_and_c_m3" >
                    <img src="/assets/icons/comunicacion/written-page_brow_24x24.png" class="d-inline-block align-top" alt="" title="Agregar Actividad a Comunicación (Correo Electronico, Llamada, visita etc.)">
                  </a>

                  <!-- Boton de Finalizar Comunicacion -->
                  <a href="/#" (click)="datoOficio( item.codCorrespondenciaEnc, item.codReferenciaSreci,
                                                         item.idDeptoFuncional,
                                                         item.nombre1Funcionario, item.apellido1Funcionario,
                                                         item.nombre2Funcionario, item.apellido2Funcionario,
                                                         item.idFuncionario, item.idEstado, item.idCorrespondenciaEnc,
                                                         item.idTipoDocumento, item.idTipoComunicacion,
                                                         item.temaComunicacion, item.descInstitucion, item.perfilInstitucion, item.comunicacionVinculante );
                                                         listarCodigoCorrespondenciaAgregarActividad(item.idTipoDocumento, item.idTipoComunicacion);"
                          data-toggle="modal" data-target="#t_and_c_m" >
                      <!-- <i class="material-icons" data-toggle="tooltip" data-placement="top" title="Finalizar Comunicacion" >assignment_turned_in</i> -->
                      <img src="/assets/icons/comunicacion/verified-text-paper_blue_24x24.png" class="d-inline-block align-top" alt="" title="Finalizar Comunicación (Se debe subir documento de soporte adjunto)" >
                  </a>

                  <!-- Boton de Anular Comunicacion -->
                  <a href="/#" (click)="datoOficio( item.codCorrespondenciaEnc, item.codReferenciaSreci,
                                                         item.idDeptoFuncional,
                                                         item.nombre1Funcionario, item.apellido1Funcionario,
                                                         item.nombre2Funcionario, item.apellido2Funcionario,
                                                         item.idFuncionario, item.idEstado, item.idCorrespondenciaEnc,
                                                         item.idTipoDocumento, item.idTipoComunicacion,
                                                         item.temaComunicacion, item.descInstitucion, item.perfilInstitucion, item.comunicacionVinculante );
                                                         listarCodigoCorrespondenciaAgregarActividad(item.idTipoDocumento, item.idTipoComunicacion);"
                          data-toggle="modal" data-target="#t_and_c_m4" >
                      <!-- <i class="material-icons" data-toggle="tooltip" data-placement="top" title="Anular Comunicacion" >assignment_turned_in</i> -->
                      <img src="/assets/icons/comunicacion/education-access-concept_24x24.png" class="d-inline-block align-top" alt="" title="Anular Comunicación (Se debe justificar porque se anula la Comunicación)" >
                  </a>

                  <!-- Boton de Documentos -->
                  <a href="/#" (click)="datoOficio( item.codCorrespondenciaEnc, item.codReferenciaSreci,
                                                         item.idDeptoFuncional,
                                                         item.nombre1Funcionario, item.apellido1Funcionario,
                                                         item.nombre2Funcionario, item.apellido2Funcionario,
                                                         item.idFuncionario, item.idEstado, item.idCorrespondenciaEnc,
                                                         item.idTipoDocumento, item.idTipoComunicacion,
                                                         item.temaComunicacion, item.descInstitucion, item.perfilInstitucion, item.comunicacionVinculante );
                                                         getlistaDocumentosTable();"
                               data-toggle="modal" data-target="#t_and_c_m5" >

                    <img src="/assets/icons/comunicacion/zoom-interface-symbol-of-text-paper-with-a-magnifier-glass_blue_24x24.png" class="d-inline-block align-top" alt="" title="Ver Documento de soporte">
                  </a>

              </td>
            </tr>
        </tbody>
    </table>
</div>


<!-- Modal de Finalizar Actividad -->
<div *ngIf="idEstadoModal != 5 " class="modal fade" id="t_and_c_m" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
      data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" > <i class="material-icons">close</i> </button>
        <h4 class="modal-title" id="myModalLabel">Comunicacion No. {{ codOficioIntModal }} | Referencia ( {{ codOficioRefModal }} )</h4>
        <!-- Loader de Carga de los Datos -->
        <div id="loader-2" *ngIf="loading_table == 'show'" >
          <img src="assets/images/loading_2.gif" alt="Cargando Tareas" style="width:25px;">
        </div>
      </div>

      <div class="modal-body">
        <!-- Formulario del Oficio Asignado -->
          <form #finalizarOficioForm="ngForm" (ngSubmit)="onSubmit(finalizarOficioAsignado, 1)" name="finalizarOficioForm" role="form">
            <!-- fila 1 del Formulario -->
            <h4>Finalización de Comunicación | {{ codOficioRefModal }} | COM VINC: {{ comunicacionVinculante }} </h4>
            <hr class="colorgraph">
            <!-- <div class="row">
              <div class="col-md-6 mb-3">
                <label for="validationDefault01">Funcionario Asignado</label>
                <input type="text" class="form-control" id="validationDefault01" placeholder="Funcionario Asignado"
                       value="{{ nombre1FuncModal }} {{ nombre2FuncModal }} {{ apellido1FuncModal }} {{ apellido2FuncModal }} " disabled>
              </div>

            </div> -->

            <!-- fila 2 del Formulario -->
            <div class="row">
              <div class="col-md-12 mb-4">
                <!-- <label for="validationDefault01">Descripción del Oficio</label> -->
                <textarea #descripcionOficio="ngModel" type="text" name="descripcionOficio"
                        ngControl="descripcionOficio" [(ngModel)]="finalizarOficios.descripcionOficio" required maxlength="800" minlength="15"
                        class="form-control" placeholder="Descripción de la Comunicacion" rows="3">
                </textarea>
                <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.required" >La Descripción es obligatoria</small>
                <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.minlength" >Se nesesita por lo menos {{ descripcionOficio.errors.minlength.requiredLength }} caracteres</small>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12 mb-4">
                <!-- <label for="validationDefault02">Actividad realizada</label> -->
                <input type="text" class="form-control" [(ngModel)]="finalizarOficios.actividadOficio" name="actividadOficio" id="actividadOficio"
                    placeholder="Actividad realizada" maxlength="180" required value="">
                  <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.required" >La Actividad es obligatoria</small>
              </div>
            </div>

          <hr class="hr-new" *ngIf="viewcomunicacionVinculante == true">
            <div class="row" *ngIf="viewcomunicacionVinculante == true">
              <!-- Direccion Encargada del tema de la Comunicacion -->
              <div class="col-xs-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <select #idDireccionSreciComVinc="ngModel" class="form-control" name="idDireccionSreciComVinc" id="idDireccionSreciComVinc"
                        ngControl="idDireccionSreciComVinc" [(ngModel)]="finalizarOficios.idDireccionSreciComVinc" tabindex="8"
                           (change)="getlistaSubDireccionesSRECIComVinculante()" >
                      <option value="0">Sub Secretaría Responsable </option>
                      <option *ngFor="let list of JsonOutgetlistaDireccionSRECI" value="{{ list.idDireccionSreci }}">{{ list.descDireccionSreci }}</option>
                  </select>
                  <small class="form-text text-muted" *ngIf="idDireccionSreciComVinc.value == 0 || idDireccionSreciComVinc.value == null " >
                    Debes Seleccionar una Sub Secretaría vinculante</small>
                  <!-- <small class="form-text text-muted" *ngIf="idDireccionSreciComVinc.errors?.required" >Debes Seleccionar una Sub Secretaría responsable</small> -->
                </div>
             </div>

             <!-- SubDireccion Encargada del tema de la Comunicacion -->
             <div class="col-xs-12 col-sm-6 col-md-6">
               <div class="form-group">
                 <select #idDeptoFuncionalComVinc="ngModel" class="form-control" name="idDeptoFuncionalComVinc" id="idDeptoFuncionalComVinc"
                       ngControl="idDeptoFuncionalComVinc" [(ngModel)]="finalizarOficios.idDeptoFuncionalComVinc" tabindex="9" >
                     <option value="0">Dirección Responsable</option>
                     <option *ngFor="let list of JsonOutgetlistaSubDireccionSRECIComVinculantes" value="{{ list.idDeptoFuncional }}">{{ list.descDeptoFuncional }}</option>
                 </select>
                 <small class="form-text text-muted" *ngIf="idDeptoFuncionalComVinc.value == 0 || idDeptoFuncionalComVinc.value == null " >
                   Debes Seleccionar una Dirección vinculante</small>
                 <!-- <small class="form-text text-muted" *ngIf="idDeptoFuncional.errors?.required" >Debes Seleccionar una Dirección responsable</small> -->
               </div>
             </div>

            </div>

            <!-- Fila de Tipo de Comunicaciones -->
            <div class="row" *ngIf="viewcomunicacionVinculante == true">
                <!-- Tipo de Comunicacion -->
                <div class="col-xs-12 col-sm-6 col-md-6">
                  <div class="form-group">
                    <select #idTipoDocumentoComVinc="ngModel" class="form-control" name="idTipoDocumentoComVinc"
                          ngControl="idTipoDocumentoComVinc" [(ngModel)]="finalizarOficios.idTipoDocumentoComVinc"  >
                        <option value="0">Tipo de Comunicación</option>
                        <option *ngFor="let list of JsonOutgetlistaTiposDocumentos" value="{{ list.idTipoDocumento }}" > {{ list.descTipoDocumento }}</option>
                    </select>
                    <small class="form-text text-muted" *ngIf="idTipoDocumentoComVinc.value == 0 || idTipoDocumentoComVinc.value == null " >Debes Seleccionar un Tipo de Comunicacion</small>
                    <!-- <small class="form-text text-muted" *ngIf="idTipoDocumento.errors?.required" >Debes Seleccionar un Tipo de Comunicacion</small> -->
                  </div>
               </div>


               <div class="col-xs-12 col-sm-6 col-md-6">
                   <div class="panel panel-primary">
                      <div class="panel-body text-center">
                        <h6 title="Selecciona un Tipo de Comunicación, para Filtrar la Información a Seleccionar" class="text-on-pannel text-primary">
                          <!-- Seleccion de COmunicacion de Ingreso -->
                          <!-- Comunicacion de Ingreso -->
                          <label class="custom-control custom-radio">
                             <input id="radio1" name="radio" type="radio" class="custom-control-input fakeRadio" (change)="getlistaComunicacionVinculanteAll(1)">
                             <span class="custom-control-indicator"></span>
                             <span class="custom-control-description">Ingreso Com.</span>
                          </label>

                          <!-- Comunicacion de Salida -->
                          <label class="custom-control custom-radio">
                             <input id="radio2" name="radio" type="radio" class="custom-control-input fakeRadio" (change)="getlistaComunicacionVinculanteAll(2)">
                             <span class="custom-control-indicator"></span>
                             <span class="custom-control-description">Salida Com.</span>
                          </label>

                          <!-- Ambas opciones -->
                          <!-- <label class="custom-control custom-radio">
                             <input id="radio3" name="radio" type="radio" class="custom-control-input fakeRadio" (change)="getlistaComunicacionVinculanteAll(3)">
                             <span class="custom-control-indicator"></span>
                             <span class="custom-control-description">Ambas Com.</span>
                          </label> -->
                        </h6>
                      </div>
                  </div>
                  <button type="button" (click)="cleanComunicacionVinculante()" class="btn btn-primary btn-sm">Limpiar Filtro</button>
                </div>
            </div>

            <hr class="hr-new" *ngIf="viewcomunicacionVinculante == true">

            <!-- Fila para Seleccionar la(s) Comunicaciones Segun el Tipo -->
            <div class="row" *ngIf="viewcomunicacionVinculante == true">
              <div class="col-xs-12 col-sm-12 col-md-12">
      					<div class="form-group" >
                    <angular2-multiselect [data]="itemComunicacionVincList" name="selectComVinc"
                        [settings]="settingsComunicacionVinc"
                        [(ngModel)]="selectedComunicacionVincItems"
                        (onSelect)="onItemComVinculanteSelect($event)"
                        (onDeSelect)="OnItemComVinculanteDeSelect($event)"
                        (onSelectAll)="onSelectComVinculanteAll($event)"
                        (onDeSelectAll)="onComVinculanteDeSelectAll($event)">
                    </angular2-multiselect>
                    <small class="form-text text-muted" >Selecciona la(s) Comunicaciones Vinculantes con la Actual</small>
      					</div>
      				</div>

            </div>

            <!-- Fila de Documentos y Unidad de Correspondencia -->
            <!-- <div class="row"> -->
              <!-- Codigo de Respuesta -->
              <!-- <div class="col-xs-12 col-sm-5 col-md-5"> -->
                <!-- <label for="validationDefault02">Actividad realizada</label> -->
                <!-- <input type="text" class="form-control" [(ngModel)]="finalizarOficios.codOficioRespuesta" name="codOficioRespuesta" id="codOficioRespuesta"
                    placeholder="Comunicación de Respuesta" required value="{{ idCorrepEncModal }}" disabled>
              </div> -->

              <!-- Comunicacion Enviada a Correspondencia | Estado = 14 -->
              <!-- <div class="col-xs-12 col-sm-7 col-md-7">
                <div class="panel panel-primary">
                 <div class="panel-body">
                   <h6 title="La Comunicación requiere ser enviada a la Unidad de Correspondencia, para la entrega de forma presencial" class="text-on-pannel text-primary">
                     <strong class="text-uppercase">
                       <label class="custom-control custom-checkbox">
                         <input type="checkbox" name="chkCorrespondencia" class="custom-control-input chkCorrespondencia"
                             (click)="checkEnviarCorrespondencia()" >
                         <span class="custom-control-indicator"></span>
                         <span class="custom-control-description">Enviar a Unidad de Correspondencia</span>
                         <input style="width:0px;height:0px;color:white" type="text" value="2" name="estadoCorrepondencia" id="estadoCorrepondencia" >
                       </label>
                     </strong>
                   </h6>
                </div>
               </div>
             </div> -->

            <!-- </div> -->


            <div class="row" *ngIf="showDireccionCorrespondencia == true ">
              <div class="col-xs-12 col-sm-12 col-md-12">
                <!-- <label for="validationDefault02">Actividad realizada</label> -->
                <textarea #direccionCorrespondencia="ngModel" type="text" name="direccionCorrespondencia" id="direccionCorrespondencia"
                        ngControl="direccionCorrespondencia" [(ngModel)]="finalizarOficios.descripcionOficio" maxlength="600" minlength="15"
                        class="form-control" placeholder="Dirección del destinatario" rows="3">
                        <!-- <small class="form-text text-muted" *ngIf="direccionCorrespondencia.errors?.required" >La Descripción es obligatoria</small> -->
                        <small class="form-text text-muted" *ngIf="direccionCorrespondencia.errors?.minlength" >Se nesesita por lo menos {{ descripcionOficio.errors.minlength.requiredLength }} caracteres</small>
                </textarea>
              </div>
            </div>

            <hr>
            <!-- Seccion de Anexos -->
            <!-- <h4>Anexos</h4> -->
            <div class="row">
              <div class="col-xs-12 col-md-12 col-lg-12">
                <label class="custom-file">
                    <input #pdfDocumento="ngModel" type="file" class="form-control-file" id="pdfDocumento" name="pdfDocumento"
                         ngControl="pdfDocumento" [(ngModel)]="finalizarOficios.pdfDocumento" placeholder="Subir Pdf ..."
                         aria-describedby="fileHelp" (change)="fileChangeEvent($event)" >
                    <span class="custom-file-control"></span>
                </label>
              </div>
            </div>

            <hr>
            <div class="row">
              <div class="col-xs-12 col-md-8 col-lg-12">
                <!-- Barra de Progreso de Carga de la Imagen -->
                <div class="progress">
                    <div id="upload-progress-bar" class="progress-bar progress-bar-success"
                        role="progressbar"
                        aria-valuenow="0"
                        aria-valuemin="0"
                        aria-valuemax="0"
                        style="width:1%">
                    </div>
                </div>
                <p id="status"></p>

                <!-- tabla que muestra los Documentos subidos -->
                <table class="table table-striped" >
                   <thead>
                     <tr>
                       <th class="text-center">#</th>
                       <th class="text-center">Nombre de Documento</th>
                       <th class="text-center">Extencion</th>
                       <th class="text-center">Peso/Mb</th>
                       <th class="text-center">Documento</th>
                       <th class="text-center">Borrar</th>
                     </tr>
                   </thead>
                   <tbody >
                     <tr *ngFor="let suchnewrow of JsonOutgetListaDocumentos; let homeFormIndex = index">
                               <td>{{ homeFormIndex + 1 }}</td>
                               <td class="text-center" title="Código: {{ suchnewrow.nameDoc }}">{{ suchnewrow.nombreDoc }}</td>
                               <td class="text-center" >{{ suchnewrow.extDoc }}</td>
                               <td class="text-center">{{ suchnewrow.pesoDoc }}</td>
                               <td class="text-center"> <a title="Has Clic sobre la Imagen para ver con detalle el contenido..."
                                       href="{{ urlComplete + suchnewrow.nameDoc + '.' + suchnewrow.extDoc }}" target="_blank" >
                                 <img style="width:50px; height:50px; box-shadow:8px 10px 5px 0px #888888"
                                   src="{{ urlComplete + suchnewrow.nameDoc + '.' + suchnewrow.extDoc }}"
                                   onerror="this.src='assets/icons/media/question-class-note-symbol-128x128.png'"
                                   alt="Cargando Imagen ..." ></a>
                               </td>
                               <td>
                                   <button  (click)="deleteRowHomeForm(homeFormIndex, suchnewrow.nameDoc, suchnewrow.extDoc )" type="button"
                                       class="btn btn-danger" style="padding: 2px">
                                     Borrar</button>
                               </td>
                       </tr>
                   </tbody>
                 </table>

              </div>
            </div>

            <hr class="colorgraph">

            <!-- <button class="btn btn-primary" type="submit">Submit form</button> -->
            <!-- <button type="reset" class="btn btn-primary">Limpiar</button> -->
            <button class="btn btn-success" type="submit" [disabled]="!finalizarOficioForm.valid" style="cursor: pointer">Guardar</button>
            <button  type="button" id="closeModalFinCom"
                    class="btn btn-danger" data-dismiss="modal"  data-backdrop="static" data-keyboard="false" style="cursor: pointer">Cerrar</button>
        </form>
    </div>
      <div class="modal-footer">

      </div>
</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->


    <!-- Modal de Oficio Respuesta Actividad -->
    <div *ngIf="idEstadoModal != 5 " class="modal fade" id="t_and_c_m2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
          data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" > <i class="material-icons">close</i> </button>
            <h4 class="modal-title" id="myModalLabel">Comunicación No. {{ codOficioIntModal }} | Referencia ( {{ codOficioRefModal }} )</h4>
            <!-- Loader de Carga de los Datos -->
            <div id="loader-2" *ngIf="loading_table == 'show'" >
              <img src="assets/images/loading_2.gif" alt="Cargando Tareas" style="width:25px;">
            </div>
          </div>

          <div class="modal-body">
            <!-- Formulario del Oficio Asignado -->
              <form #finalizarOficioForm="ngForm" (ngSubmit)="onSubmit(creacionOficioAsignado, 2)" name="finalizarOficioForm" role="form">
                <!-- fila 1 del Formulario -->
                <h4>Creacion de Comunicación de Respuesta | {{ codOficioRefModal }}</h4>
                <hr class="colorgraph">
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <label for="validationDefault01">Funcionario Asignado</label>
                    <input type="text" class="form-control"
                           value="{{ nombre1FuncModal }} {{ nombre2FuncModal }} {{ apellido1FuncModal }} {{ apellido2FuncModal }} " disabled>
                  </div>

                  <div class="col-md-6 mb-3">
                    <label for="validationDefault01">Temática</label>
                    <input type="text" class="form-control"
                           value="{{ temaComunicacionModal }}" disabled>
                  </div>

                  <div class="col-md-2 mb-3">
                    <label for="validationDefault01">Institución</label>
                    <input type="text" class="form-control"
                          title="{{ descinstitucionComunicaiconModal }}" value="{{ institucionComunicaiconModal }} " disabled>
                  </div>

                </div>

                <!-- fila 2 del Formulario -->
                <div class="row">
                  <div class="col-md-12 mb-4">
                    <!-- <label for="validationDefault01">Descripción del Oficio</label> -->
                    <textarea #descripcionOficio="ngModel" type="text" name="descripcionOficio"
                            ngControl="descripcionOficio" [(ngModel)]="finalizarOficios.descripcionOficio" required maxlength="1400" minlength="15"
                            class="form-control"  placeholder="Descripción de la Comunicación" rows="3">
                    </textarea>
                    <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.required" >La Descripción es obligatoria</small>
                    <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.minlength" >Se nesesita por lo menos {{ descripcionOficio.errors.minlength.requiredLength }} caracteres</small>
                    <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.maxlength" >La capacidad maxima para la Descripcion es: 1400 caracteres</small>
                  </div>
                </div>

                <hr class="colorgraph">
                <!-- <button class="btn btn-primary" type="submit">Submit form</button> -->
                <!-- <button type="button" class="btn btn-primary">Limpiar</button> -->
                <button class="btn btn-success" type="submit" [disabled]="!finalizarOficioForm.valid" style="cursor: pointer">Guardar</button>
                <button type="button" id="closeModalComResp" class="btn btn-danger" data-dismiss="modal" style="cursor: pointer">Cerrar</button>
            </form>
        </div>
          <div class="modal-footer">

          </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<!-- Modal de Agregar Actividad a Comunicacion-->
<div *ngIf="idEstadoModal != 5 " class="modal fade" id="t_and_c_m3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
      data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" > <i class="material-icons">close</i> </button>
        <h4 class="modal-title" id="myModalLabel">Comunicación No. {{ codOficioIntModal }} | Referencia ( {{ codOficioRefModal }} )</h4>
        <!-- Loader de Carga de los Datos -->
        <div id="loader-2" *ngIf="loading_table == 'show'" >
          <img src="assets/images/loading_2.gif" alt="Cargando Tareas" style="width:25px;">
        </div>
      </div>

      <div class="modal-body">
        <!-- Formulario del Oficio Asignado -->
          <form #finalizarOficioForm="ngForm" (ngSubmit)="onSubmit(agregarActividadResp, 3)" name="finalizarOficioForm" role="form">
            <!-- fila 1 del Formulario -->
            <h4>Agregar Actividad a Comunicacion | {{ codOficioRefModal }}</h4>
            <hr class="colorgraph">
            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="validationDefault01">Funcionario Asignado</label>
                <input type="text" class="form-control"
                       value="{{ nombre1FuncModal }} {{ nombre2FuncModal }} {{ apellido1FuncModal }} {{ apellido2FuncModal }} " disabled>
              </div>

              <div class="col-md-6 mb-3">
                <label for="validationDefault01">Temática</label>
                <input type="text" class="form-control"
                       value="{{ temaComunicacionModal }}" disabled>
              </div>

              <div class="col-md-2 mb-3">
                <label for="validationDefault01">Institución</label>
                <input type="text" class="form-control"
                      title="{{ descinstitucionComunicaiconModal }}" value="{{ institucionComunicaiconModal }} " disabled>
              </div>

            </div>

            <!-- fila 2 del Formulario -->
            <div class="row">
              <div class="col-md-12 mb-4">
                <!-- <label for="validationDefault01">Descripción del Oficio</label> -->
                <textarea #descripcionOficio="ngModel" type="text" name="descripcionOficio"
                        ngControl="descripcionOficio" [(ngModel)]="finalizarOficios.descripcionOficio" required maxlength="1400" minlength="15"
                        class="form-control" placeholder="Descripción de la Comunicacion" rows="3">
                </textarea>
                <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.required" >La Descripción es obligatoria</small>
                <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.minlength" >Se nesesita por lo menos {{ descripcionOficio.errors.minlength.requiredLength }} caracteres</small>
                <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.maxlength" >La capacidad maxima para la Descripcion es: 1400 caracteres</small>
              </div>
            </div>

            <hr class="colorgraph">
            <!-- <button class="btn btn-primary" type="submit">Submit form</button> -->
            <!-- <button type="button" class="btn btn-primary">Limpiar</button> -->
            <button class="btn btn-success" type="submit" [disabled]="!finalizarOficioForm.valid" style="cursor: pointer">Guardar</button>
            <button type="button" id="closeModalAgreCom" class="btn btn-danger" data-dismiss="modal" style="cursor: pointer">Cerrar</button>
        </form>
    </div>
      <div class="modal-footer">

      </div>
</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<!-- Modal de Anular la Comunicacion-->
<div *ngIf="idEstadoModal != 5 " class="modal fade" id="t_and_c_m4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
      data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" > <i class="material-icons">close</i> </button>
        <h4 class="modal-title" id="myModalLabel">Comunicación No. {{ codOficioIntModal }} | Referencia ( {{ codOficioRefModal }} )</h4>
        <!-- Loader de Carga de los Datos -->
        <div id="loader-2" *ngIf="loading_table == 'show'" >
          <img src="assets/images/loading_2.gif" alt="Cargando Tareas" style="width:25px;">
        </div>
      </div>

      <div class="modal-body">
        <!-- Formulario del Oficio Asignado -->
          <form #AnularComForm="ngForm" (ngSubmit)="onSubmit(agregarActividadResp, 4)" name="AnularComForm" role="form">
            <!-- fila 1 del Formulario -->
            <h4>Anular Comunicación | {{ codOficioRefModal }}</h4>
            <hr class="colorgraph">
            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="validationDefault01">Funcionario Asignado</label>
                <input type="text" class="form-control"
                       value="{{ nombre1FuncModal }} {{ nombre2FuncModal }} {{ apellido1FuncModal }} {{ apellido2FuncModal }} " disabled>
              </div>

              <div class="col-md-6 mb-3">
                <label for="validationDefault01">Temática</label>
                <input type="text" class="form-control"
                       value="{{ temaComunicacionModal }}" disabled>
              </div>

              <div class="col-md-2 mb-3">
                <label for="validationDefault01">Institución</label>
                <input type="text" class="form-control"
                      title="{{ descinstitucionComunicaiconModal }}" value="{{ institucionComunicaiconModal }} " disabled>
              </div>

            </div>

            <!-- fila 2 del Formulario -->
            <div class="row">
              <div class="col-md-12 mb-4">
                <!-- <label for="validationDefault01">Descripción del Oficio</label> -->
                <textarea #descripcionOficio="ngModel" type="text" name="descripcionOficio"
                        ngControl="descripcionOficio" [(ngModel)]="finalizarOficios.descripcionOficio" required maxlength="1400" minlength="15"
                        class="form-control" placeholder="Descripción de la Comunicacion" rows="3">
                </textarea>
                <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.required" >La Descripción es obligatoria</small>
                <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.minlength" >Se nesesita por lo menos {{ descripcionOficio.errors.minlength.requiredLength }} caracteres</small>
                <small class="form-text text-muted" *ngIf="descripcionOficio.errors?.maxlength" >La capacidad maxima para la Descripcion es: 1400 caracteres</small>
              </div>
            </div>

            <hr class="colorgraph">
            <!-- <button class="btn btn-primary" type="submit">Submit form</button> -->
            <!-- <button type="button" class="btn btn-primary">Limpiar</button> -->
            <button class="btn btn-success" type="submit" [disabled]="!AnularComForm.valid" style="cursor: pointer">Guardar</button>
            <button type="button" id="closeModalAnulaCom2" class="btn btn-danger" data-dismiss="modal" style="cursor: pointer">Cerrar</button>
        </form>
    </div>
      <div class="modal-footer">

      </div>
</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<!-- Modal de Ver Documento de soporte de la Comunicacion-->
<div *ngIf="idEstadoModal != 5 " class="modal fade" id="t_and_c_m5" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
      data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" > <i class="material-icons">close</i> </button>
        <h4 class="modal-title" id="myModalLabel">Comunicación No. {{ codOficioIntModal }} | Referencia ( {{ codOficioRefModal }} )</h4>
        <!-- Loader de Carga de los Datos -->
        <div id="loader-2" *ngIf="loading_table == 'show'" >
          <img src="assets/images/loading_2.gif" alt="Cargando Tareas" style="width:25px;">
        </div>
      </div>

      <div class="modal-body">
        <!-- Formulario del Oficio Asignado -->
          <form #AnularComForm="ngForm" (ngSubmit)="onSubmit(agregarActividadResp, 4)" name="AnularComForm" role="form">
            <!-- fila 1 del Formulario -->
            <h4>Documento(s) de la Comunicación | {{ codOficioRefModal }}</h4>
            <hr class="colorgraph">
            <!-- fila 2 del Formulario -->
            <div class="row">
              <div class="col-md-12 mb-4">
                <!-- Tabla de Funcionarios disponibles para asignar -->
                <div class="table table-striped table-bordered" id="demo2" style="height: 300px; overflow: auto">
                  <!-- Loader de Carga de los Datos -->
                  <div id="loader-2" *ngIf="loading_table == 'show'" >
                    <p style="margin-left:35%; margin-top:7%; margin-bottom:2%;">Buscando información de Documentos ...</p>
                    <img src="assets/images/832.gif" alt="Cargando Tareas" style="margin-left:45%;" >
                  </div>

                  <table class="table table-striped" cellspacing="0" width="100%"
                      *ngIf="loadTabla2 == true">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Código Documento</th>
                        <th>Fecha Creacion</th>
                        <th>Documento</th>
                        <th>Descargar</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of JsonOutgetlistaDocumentosUpload; let i = index">
                        <th scope="row">{{ i + 1 }}</th>
                        <td>{{ item.codDocumento }}</td>
                        <td>{{ item.fechaIngreso | date :'dd-MM-yyyy' }}</td>
                        <td>{{ item.descDocumento }}</td>
                        <td>
                          <a *ngIf="item.urlDocumento != null && item.urlDocumento.length > 5" title="Ver Documento de soporte"
                            href="{{ urlComplete + item.urlDocumento }}" target="_blank">
                              <i class="material-icons">photo</i>
                          </a>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <hr class="colorgraph">
            <!-- <button class="btn btn-primary" type="submit">Submit form</button> -->
            <!-- <button type="button" class="btn btn-primary">Limpiar</button> -->
            <!-- <button class="btn btn-success" type="submit" [disabled]="!AnularComForm.valid" style="cursor: pointer">Guardar</button> -->
            <button type="button" id="closeModalAnulaCom" class="btn btn-danger" data-dismiss="modal" style="cursor: pointer">Cerrar</button>
        </form>
    </div>
      <div class="modal-footer">

      </div>
</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.Modal de Ver Documento de soporte de la Comunicacion -->


</div> <!--  Fin de container -->
