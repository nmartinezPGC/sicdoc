<div class="container">

  <h2> {{ titulo }} <small> | SICDOC.</small></h2>
  <hr class="colorgraph">

  <!-- Loader de Carga de los Datos -->
  <div id="loader-2" *ngIf="loading == 'show'">
    <img src="assets/images/aguarde.gif" alt="Cargando Tareas">
  </div>

  <!-- Fila para el Area de Busqueda de los Oficios -->
  <div class="row">
    <div class="col-md-1-12">
    <h4>Buscar por:
    <input type="radio" name="codCorr" [(ngModel)]="codCorr" value="temaComunicacion" >Tema de Oficio |
    <input type="radio" name="codCorr" [(ngModel)]="codCorr" value="codCorrespondenciaEnc"  >No. Oficio Interno |
    <input type="radio" name="codCorr" [(ngModel)]="codCorr" value="codReferenciaSreci" >No. Oficio Ingresado |
    <input type="radio" name="codCorr" [(ngModel)]="codCorr" value="descCorrespondenciaEnc" >Descripción Oficio
    </h4>
      <input class="form-control" type="text" name="search"  [(ngModel)]="search" placeholder="Buscar" >
    </div>
  </div>

  <hr>

  <!-- Fila para la tabla Principal de la ventana de finalizar Oficio -->
  <div class="row">
    <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%" >
        <thead >
            <tr>
              <th>Estado</th>
              <th>No. Oficio Interno</th>
              <th>No. Oficio Ingresado</th>
              <th>Institución</th>
              <th>Tema Oficio</th>
              <th>Fecha Ingreso</th>
              <th>Fecha Entrega</th>
              <th>Accion</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
              <th>Estado</th>
              <th>No. Oficio Interno</th>
              <th>No. Oficio Ingresado</th>
              <th>Institución</th>
              <th>Tema Oficio</th>
              <th>Fecha Ingreso</th>
              <th>Fecha Entrega</th>
              <th>Accion</th>
            </tr>
        </tfoot>
        <tbody >
            <tr *ngFor="let item of JsonOutgetlistaOficiosAll | searchfilter:codCorr:search ">
              <td [ngClass]="{ 'text-warning': item.idEstado.idEstado == 3, 'text-danger' : item.idEstado.idEstado == 6,
                                'text-primary' : item.idEstado.idEstado == 7, 'text-success' : item.idEstado.idEstado == 5 }" >
                <!-- <p class="alert alert-primary"> -->
                  {{ item.idEstado.descripcionEstado }}
                <!-- </p> -->
              </td>
              <td> {{ item.codCorrespondenciaEnc }} </td>
              <td> {{ item.codReferenciaSreci }} </td>
              <td> {{ item.idInstitucion.descInstitucion }} </td>
              <td> {{ item.temaComunicacion }} </td>
                <!-- <td> {{ timeConverter( item.fechaMaxEntrega.timestamp )  }} </td> -->
              <td> {{ item.fechaIngreso.timestamp | generateDate }} </td>
              <td> {{ item.fechaMaxEntrega.timestamp | generateDate }} </td>
              <td> <a href="/#" (click)="datoOficio( item.codCorrespondenciaEnc, item.codReferenciaSreci,
                                                     item.idDeptoFuncional.idDeptoFuncional,
                                                     item.idFuncionarioAsignado.nombre1Funcionario, item.idFuncionarioAsignado.apellido1Funcionario,
                                                     item.idFuncionarioAsignado.nombre2Funcionario, item.idFuncionarioAsignado.apellido2Funcionario,
                                                     item.idFuncionarioAsignado.idFuncionario, item.idEstado.idEstado )"
                      data-toggle="modal" data-target="#t_and_c_m" >
                      <i class="material-icons" data-toggle="tooltip" data-placement="top" title="Finalizar Oficio" >assignment_turned_in</i>
                  </a>
                  <a href="/#" data-toggle="modal" data-target="#t_and_c_m2" >
                    <i class="material-icons" data-placement="top" title="Oficio Respuesta">create_new_folder</i>
                  </a>
              </td>
            </tr>
        </tbody>
    </table>
</div>

    <!-- Paginacion de la Tabla Datos de la API -->
    <ul class="pagination">
      <!-- Boton de Previous -->
      <li>
         <a  [routerLink]="['/finalizar-actividad', pagePrev]" aria-label="Previous" >
            <i class="material-icons">navigate_before</i>
         </a>
      </li>
      <!-- Botones de las Paginas Totales -->
      <li *ngFor="let page of pages">
        <a [routerLink]="['/finalizar-actividad', page + 1 ]" >
          <i class="material-icons">panorama_fish_eye</i>{{ page + 1 }}
        </a>
      </li>
      <!-- Boton de Next -->
      <li>
         <a  [routerLink]="['/agregar-actividad', pageNext]" aria-label="Next" >
            <i class="material-icons">navigate_next</i>
         </a>
      </li>
    </ul>


    <!-- Modal de Oficio Respuesta Actividad -->
    <div *ngIf="idEstadoModal != 5 " class="modal fade" id="t_and_c_m2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
          data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" (click)="validExit();" data-dismiss="modal" aria-hidden="true" > <i class="material-icons">close</i> </button>
            <h4 class="modal-title" id="myModalLabel">Oficio No. {{ codOficioIntModal }} | Referencia ( {{ codOficioRefModal }} )</h4>
            <!-- Loader de Carga de los Datos -->
            <div id="loader-2" *ngIf="loading_table == 'show'" >
              <img src="assets/images/loading_2.gif" alt="Cargando Tareas" style="width:25px;">
            </div>
          </div>

          <div class="modal-body">
            <!-- Formulario del Oficio Asignado -->
              <form #finalizarOficioForm="ngForm" (ngSubmit)="onSubmit(finalizarOficioAsignado)" name="finalizarOficioForm" role="form">
                <!-- fila 1 del Formulario -->
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="validationDefault01">Tema de Oficio</label>
                    <input type="text" class="form-control" id="validationDefault01" placeholder="First name"
                           value="{{ nombre1FuncModal }} {{ nombre2FuncModal }} {{ apellido1FuncModal }} {{ apellido2FuncModal }} " disabled>
                  </div>

                </div>

                <!-- fila 2 del Formulario -->
                <div class="row">
                  <div class="col-md-12 mb-4">
                    <!-- <label for="validationDefault01">Descripción del Oficio</label> -->
                    <textarea #descripcionOficio="ngModel" type="text" name="descripcionOficio" id="descripcionOficio"
                            ngControl="descripcionOficio" [(ngModel)]="finalizarOficios.descripcionOficio" required
                            class="form-control" id="exampleFormControlTextarea1" placeholder="Descripción del Oficio" rows="3">
                    </textarea>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12 mb-3">
                    <!-- <label for="validationDefault02">Actividad realizada</label> -->
                    <input type="text" class="form-control" [(ngModel)]="finalizarOficios.actividadOficio" name="actividadOficio" id="actividadOficio"
                        placeholder="Actividad realizada" required value="">
                  </div>
                </div>
                <!-- <button class="btn btn-primary" type="submit">Submit form</button> -->
                <button type="button" class="btn btn-primary">Limpiar</button>
                <!-- <button type="button" class="btn btn-primary" data-dismiss="modal">Guardar</button> -->
                <button class="btn btn-success" type="submit" [disabled]="!finalizarOficioForm.valid" >Guardar</button>
            </form>
        </div>
          <div class="modal-footer">

          </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<!-- Modal de Finalizar Actividad -->
<div *ngIf="idEstadoModal != 5 " class="modal fade" id="t_and_c_m" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
      data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" > <i class="material-icons">close</i> </button>
        <h4 class="modal-title" id="myModalLabel">Oficio No. {{ codOficioIntModal }} | Referencia ( {{ codOficioRefModal }} )</h4>
        <!-- Loader de Carga de los Datos -->
        <div id="loader-2" *ngIf="loading_table == 'show'" >
          <img src="assets/images/loading_2.gif" alt="Cargando Tareas" style="width:25px;">
        </div>
      </div>

      <div class="modal-body">
        <!-- Formulario del Oficio Asignado -->
          <form #finalizarOficioForm="ngForm" (ngSubmit)="onSubmit(finalizarOficioAsignado)" name="finalizarOficioForm" role="form">
            <!-- fila 1 del Formulario -->
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="validationDefault01">Tema de Oficio</label>
                <input type="text" class="form-control" id="validationDefault01" placeholder="First name"
                       value="{{ nombre1FuncModal }} {{ nombre2FuncModal }} {{ apellido1FuncModal }} {{ apellido2FuncModal }} " disabled>
              </div>

            </div>

            <!-- fila 2 del Formulario -->
            <div class="row">
              <div class="col-md-12 mb-4">
                <!-- <label for="validationDefault01">Descripción del Oficio</label> -->
                <textarea #descripcionOficio="ngModel" type="text" name="descripcionOficio" id="descripcionOficio"
                        ngControl="descripcionOficio" [(ngModel)]="finalizarOficios.descripcionOficio" required
                        class="form-control" id="exampleFormControlTextarea1" placeholder="Descripción del Oficio" rows="3">
                </textarea>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12 mb-3">
                <!-- <label for="validationDefault02">Actividad realizada</label> -->
                <input type="text" class="form-control" [(ngModel)]="finalizarOficios.actividadOficio" name="actividadOficio" id="actividadOficio"
                    placeholder="Actividad realizada" required value="">
              </div>
            </div>

            <div class="row">
              <div class="col-md-4 mb-3">
                <!-- <label for="validationDefault02">Actividad realizada</label> -->
                <input type="text" class="form-control" [(ngModel)]="finalizarOficios.codOficioRespuesta" name="codOficioRespuesta" id="codOficioRespuesta"
                    placeholder="Oficio de Respuesta" required value="">
              </div>
            </div>
            <!-- <button class="btn btn-primary" type="submit">Submit form</button> -->
            <button type="button" class="btn btn-primary">Limpiar</button>
            <!-- <button type="button" class="btn btn-primary" data-dismiss="modal">Guardar</button> -->
            <button class="btn btn-success" type="submit" [disabled]="!finalizarOficioForm.valid" >Guardar</button>
        </form>
    </div>
      <div class="modal-footer">

      </div>
</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

</div> <!--  Fin de container -->
